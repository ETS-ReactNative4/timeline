{"ast":null,"code":"import _defineProperty from \"/Users/aylafernandes/Desktop/timeline/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/aylafernandes/Desktop/timeline/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/aylafernandes/Desktop/timeline/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/aylafernandes/Desktop/timeline/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/aylafernandes/Desktop/timeline/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/aylafernandes/Desktop/timeline/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/aylafernandes/Desktop/timeline/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _objectWithoutProperties from \"/Users/aylafernandes/Desktop/timeline/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/aylafernandes/Desktop/timeline/src/components/layouts/buscaDependencia/BuscaDependencia.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport deburr from 'lodash/deburr';\nimport Autosuggest from 'react-autosuggest';\nimport match from 'autosuggest-highlight/match';\nimport parse from 'autosuggest-highlight/parse';\nimport TextField from '@material-ui/core/TextField';\nimport Paper from '@material-ui/core/Paper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { withStyles } from '@material-ui/core/styles';\nvar WAIT_INTERVAL = 2000;\nvar suggestions = [];\n\nfunction renderInputComponent(inputProps) {\n  var classes = inputProps.classes,\n      _inputProps$inputRef = inputProps.inputRef,\n      _inputRef = _inputProps$inputRef === void 0 ? function () {} : _inputProps$inputRef,\n      ref = inputProps.ref,\n      other = _objectWithoutProperties(inputProps, [\"classes\", \"inputRef\", \"ref\"]);\n\n  return React.createElement(TextField, Object.assign({\n    fullWidth: true,\n    InputProps: {\n      inputRef: function inputRef(node) {\n        ref(node);\n\n        _inputRef(node);\n      },\n      classes: {\n        input: classes.input\n      }\n    }\n  }, other, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }));\n}\n\nfunction renderSuggestion(suggestion, _ref) {\n  var query = _ref.query,\n      isHighlighted = _ref.isHighlighted;\n  var matches = match(suggestion.prefixo + ' - ' + suggestion.nome, query);\n  var parts = parse(suggestion.prefixo + ' - ' + suggestion.nome, matches);\n  return React.createElement(MenuItem, {\n    selected: isHighlighted,\n    component: \"div\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, parts.map(function (part, index) {\n    return part.highlight ? React.createElement(\"span\", {\n      key: String(index),\n      style: {\n        fontWeight: 400\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, part.text) : React.createElement(\"strong\", {\n      key: String(index),\n      style: {\n        fontWeight: 300\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, part.text);\n  })));\n}\n\nfunction getSuggestions(value) {\n  var inputValue = deburr(value.trim()).toLowerCase();\n  var inputLength = inputValue.length;\n  var count = 0;\n  return inputLength === 0 ? [] : suggestions.filter(function (suggestion) {\n    var keep = count < 5 && suggestion.nome.slice(0, inputLength).toLowerCase() === inputValue;\n\n    if (keep) {\n      count += 1;\n    }\n\n    return keep;\n  });\n}\n\nfunction getSuggestionValue(suggestion) {\n  return \"\";\n}\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      flexGrow: 1\n    },\n    container: {\n      position: 'relative',\n      marginTop: theme.spacing.unit * 2\n    },\n    suggestionsContainerOpen: {\n      position: 'absolute',\n      zIndex: 1,\n      marginTop: theme.spacing.unit,\n      left: 0,\n      right: 0\n    },\n    suggestion: {\n      display: 'block'\n    },\n    suggestionsList: {\n      margin: 0,\n      padding: 0,\n      listStyleType: 'none'\n    },\n    divider: {\n      height: theme.spacing.unit * 2\n    }\n  };\n};\n\nvar BuscaDependencia =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BuscaDependencia, _React$Component);\n\n  function BuscaDependencia(props) {\n    var _this;\n\n    _classCallCheck(this, BuscaDependencia);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BuscaDependencia).call(this, props));\n\n    _this.handleSuggestionSelected = function (event, _ref2) {\n      var suggestion = _ref2.suggestion,\n          suggestionValue = _ref2.suggestionValue,\n          suggestionIndex = _ref2.suggestionIndex,\n          sectionIndex = _ref2.sectionIndex,\n          method = _ref2.method;\n\n      _this.props.addSuggestion(suggestion);\n    };\n\n    _this.handleSuggestionsFetchRequested = function (_ref3) {\n      var value = _ref3.value;\n\n      _this.setState({\n        suggestions: getSuggestions(value)\n      });\n    };\n\n    _this.handleSuggestionsClearRequested = function () {\n      _this.setState({\n        suggestions: []\n      });\n    };\n\n    _this.search = function (event) {\n      clearTimeout(_this.timer);\n\n      _this.setState({\n        value: event.target.value\n      });\n\n      _this.timer = setTimeout(_this.triggerChange, WAIT_INTERVAL);\n    };\n\n    _this.handleChange = function (name) {\n      return function (event, _ref4) {\n        var newValue = _ref4.newValue;\n\n        //this.props.addFuncionario(newValue)\n        _this.setState(_defineProperty({}, name, newValue));\n      };\n    };\n\n    _this.state = {\n      value: '',\n      popper: '',\n      suggestions: [],\n      selected: []\n    };\n    _this.triggerChange = _this.triggerChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(BuscaDependencia, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.timer = null;\n    }\n  }, {\n    key: \"triggerChange\",\n    value: function triggerChange() {\n      var _this2 = this;\n\n      var value = this.state.value;\n      var url = new URL(\"https://uce.intranet.bb.com.br/api-timeline/v1/dependencias/\" + value.replace(/\\s/g, '')); //Object.keys(params).forEach(key => url.searchParams.append(key, params[key]))\n\n      fetch(url, {\n        method: \"GET\",\n        headers: {\n          \"x-access-token\": window.sessionStorage.token,\n          'Accept': 'application/json, text/plain, */*',\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        return response.json();\n      }).then(function (data) {\n        _this2.setState({\n          suggestions: data.users[0]\n        });\n      }).catch(function (err) {\n        console.error(err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n      var value = this.state.value;\n      var autosuggestProps = {\n        renderInputComponent: renderInputComponent,\n        suggestions: this.state.suggestions,\n        onSuggestionsFetchRequested: this.handleSuggestionsFetchRequested,\n        onSuggestionsClearRequested: this.handleSuggestionsClearRequested,\n        onSuggestionSelected: this.handleSuggestionSelected,\n        getSuggestionValue: getSuggestionValue,\n        renderSuggestion: renderSuggestion\n      };\n      return React.createElement(\"div\", {\n        className: classes.root,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(Autosuggest, Object.assign({}, autosuggestProps, {\n        inputProps: {\n          classes: classes,\n          placeholder: 'Buscar dependências',\n          value: value,\n          onKeyUp: this.search,\n          onChange: this.handleChange('value')\n        },\n        theme: {\n          container: classes.container,\n          suggestionsContainerOpen: classes.suggestionsContainerOpen,\n          suggestionsList: classes.suggestionsList,\n          suggestion: classes.suggestion\n        },\n        renderSuggestionsContainer: function renderSuggestionsContainer(options) {\n          return React.createElement(Paper, Object.assign({}, options.containerProps, {\n            square: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 230\n            },\n            __self: this\n          }), options.children);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return BuscaDependencia;\n}(React.Component);\n\nBuscaDependencia.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(BuscaDependencia);","map":{"version":3,"sources":["/Users/aylafernandes/Desktop/timeline/src/components/layouts/buscaDependencia/BuscaDependencia.js"],"names":["React","PropTypes","deburr","Autosuggest","match","parse","TextField","Paper","MenuItem","withStyles","WAIT_INTERVAL","suggestions","renderInputComponent","inputProps","classes","inputRef","ref","other","node","input","renderSuggestion","suggestion","query","isHighlighted","matches","prefixo","nome","parts","map","part","index","highlight","String","fontWeight","text","getSuggestions","value","inputValue","trim","toLowerCase","inputLength","length","count","filter","keep","slice","getSuggestionValue","styles","theme","root","flexGrow","container","position","marginTop","spacing","unit","suggestionsContainerOpen","zIndex","left","right","display","suggestionsList","margin","padding","listStyleType","divider","height","BuscaDependencia","props","handleSuggestionSelected","event","suggestionValue","suggestionIndex","sectionIndex","method","addSuggestion","handleSuggestionsFetchRequested","setState","handleSuggestionsClearRequested","search","clearTimeout","timer","target","setTimeout","triggerChange","handleChange","name","newValue","state","popper","selected","bind","url","URL","replace","fetch","headers","window","sessionStorage","token","then","response","json","data","users","catch","err","console","error","autosuggestProps","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","placeholder","onKeyUp","onChange","options","containerProps","children","Component","propTypes","object","isRequired"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAOC,WAAP,MAAwB,mBAAxB;AACA,OAAOC,KAAP,MAAkB,6BAAlB;AACA,OAAOC,KAAP,MAAkB,6BAAlB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AAEA,IAAMC,aAAa,GAAG,IAAtB;AAEA,IAAMC,WAAW,GAAG,EAApB;;AAEA,SAASC,oBAAT,CAA8BC,UAA9B,EAA0C;AAAA,MAChCC,OADgC,GACiBD,UADjB,CAChCC,OADgC;AAAA,6BACiBD,UADjB,CACvBE,QADuB;AAAA,MACvBA,SADuB,qCACZ,YAAM,CAAG,CADG;AAAA,MACDC,GADC,GACiBH,UADjB,CACDG,GADC;AAAA,MACOC,KADP,4BACiBJ,UADjB;;AAIxC,SACE,oBAAC,SAAD;AACE,IAAA,SAAS,MADX;AAEE,IAAA,UAAU,EAAE;AACVE,MAAAA,QAAQ,EAAE,kBAAAG,IAAI,EAAI;AAChBF,QAAAA,GAAG,CAACE,IAAD,CAAH;;AACAH,QAAAA,SAAQ,CAACG,IAAD,CAAR;AACD,OAJS;AAKVJ,MAAAA,OAAO,EAAE;AACPK,QAAAA,KAAK,EAAEL,OAAO,CAACK;AADR;AALC;AAFd,KAWMF,KAXN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF;AAeD;;AAED,SAASG,gBAAT,CAA0BC,UAA1B,QAAgE;AAAA,MAAxBC,KAAwB,QAAxBA,KAAwB;AAAA,MAAjBC,aAAiB,QAAjBA,aAAiB;AAC9D,MAAMC,OAAO,GAAGpB,KAAK,CAACiB,UAAU,CAACI,OAAX,GAAqB,KAArB,GAA6BJ,UAAU,CAACK,IAAzC,EAA+CJ,KAA/C,CAArB;AACA,MAAMK,KAAK,GAAGtB,KAAK,CAACgB,UAAU,CAACI,OAAX,GAAqB,KAArB,GAA6BJ,UAAU,CAACK,IAAzC,EAA+CF,OAA/C,CAAnB;AAEA,SACE,oBAAC,QAAD;AAAU,IAAA,QAAQ,EAAED,aAApB;AAAmC,IAAA,SAAS,EAAC,KAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGI,KAAK,CAACC,GAAN,CAAU,UAACC,IAAD,EAAOC,KAAP,EAAiB;AAC1B,WAAOD,IAAI,CAACE,SAAL,GAEL;AAAM,MAAA,GAAG,EAAEC,MAAM,CAACF,KAAD,CAAjB;AAA0B,MAAA,KAAK,EAAE;AAAEG,QAAAA,UAAU,EAAE;AAAd,OAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGJ,IAAI,CAACK,IADR,CAFK,GASH;AAAQ,MAAA,GAAG,EAAEF,MAAM,CAACF,KAAD,CAAnB;AAA4B,MAAA,KAAK,EAAE;AAAEG,QAAAA,UAAU,EAAE;AAAd,OAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGJ,IAAI,CAACK,IADR,CATJ;AAaD,GAdA,CADH,CADF,CADF;AAqBD;;AAED,SAASC,cAAT,CAAwBC,KAAxB,EAA+B;AAG7B,MAAMC,UAAU,GAAGnC,MAAM,CAACkC,KAAK,CAACE,IAAN,EAAD,CAAN,CAAqBC,WAArB,EAAnB;AACA,MAAMC,WAAW,GAAGH,UAAU,CAACI,MAA/B;AACA,MAAIC,KAAK,GAAG,CAAZ;AAEA,SAAOF,WAAW,KAAK,CAAhB,GACH,EADG,GAEH7B,WAAW,CAACgC,MAAZ,CAAmB,UAAAtB,UAAU,EAAI;AACjC,QAAMuB,IAAI,GACRF,KAAK,GAAG,CAAR,IAAarB,UAAU,CAACK,IAAX,CAAgBmB,KAAhB,CAAsB,CAAtB,EAAyBL,WAAzB,EAAsCD,WAAtC,OAAwDF,UADvE;;AAGA,QAAIO,IAAJ,EAAU;AACRF,MAAAA,KAAK,IAAI,CAAT;AACD;;AAED,WAAOE,IAAP;AACD,GATC,CAFJ;AAYD;;AAGD,SAASE,kBAAT,CAA4BzB,UAA5B,EAAwC;AAEtC,SAAO,EAAP;AACD;;AAED,IAAM0B,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK;AAAA,SAAK;AACvBC,IAAAA,IAAI,EAAE;AAEJC,MAAAA,QAAQ,EAAE;AAFN,KADiB;AAKvBC,IAAAA,SAAS,EAAE;AACTC,MAAAA,QAAQ,EAAE,UADD;AAETC,MAAAA,SAAS,EAAEL,KAAK,CAACM,OAAN,CAAcC,IAAd,GAAmB;AAFrB,KALY;AASvBC,IAAAA,wBAAwB,EAAE;AACxBJ,MAAAA,QAAQ,EAAE,UADc;AAExBK,MAAAA,MAAM,EAAE,CAFgB;AAGxBJ,MAAAA,SAAS,EAAEL,KAAK,CAACM,OAAN,CAAcC,IAHD;AAIxBG,MAAAA,IAAI,EAAE,CAJkB;AAKxBC,MAAAA,KAAK,EAAE;AALiB,KATH;AAgBvBtC,IAAAA,UAAU,EAAE;AACVuC,MAAAA,OAAO,EAAE;AADC,KAhBW;AAmBvBC,IAAAA,eAAe,EAAE;AACfC,MAAAA,MAAM,EAAE,CADO;AAEfC,MAAAA,OAAO,EAAE,CAFM;AAGfC,MAAAA,aAAa,EAAE;AAHA,KAnBM;AAwBvBC,IAAAA,OAAO,EAAE;AACPC,MAAAA,MAAM,EAAElB,KAAK,CAACM,OAAN,CAAcC,IAAd,GAAqB;AADtB;AAxBc,GAAL;AAAA,CAApB;;IA6BMY,gB;;;;;AAEJ,4BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,0FAAMA,KAAN;;AADiB,UAiBnBC,wBAjBmB,GAiBQ,UAACC,KAAD,SAAmF;AAAA,UAAzEjD,UAAyE,SAAzEA,UAAyE;AAAA,UAA7DkD,eAA6D,SAA7DA,eAA6D;AAAA,UAA5CC,eAA4C,SAA5CA,eAA4C;AAAA,UAA3BC,YAA2B,SAA3BA,YAA2B;AAAA,UAAbC,MAAa,SAAbA,MAAa;;AAE5G,YAAKN,KAAL,CAAWO,aAAX,CAAyBtD,UAAzB;AAED,KArBkB;;AAAA,UAsBnBuD,+BAtBmB,GAsBe,iBAAe;AAAA,UAAZxC,KAAY,SAAZA,KAAY;;AAC/C,YAAKyC,QAAL,CAAc;AACZlE,QAAAA,WAAW,EAAEwB,cAAc,CAACC,KAAD;AADf,OAAd;AAGD,KA1BkB;;AAAA,UA4BnB0C,+BA5BmB,GA4Be,YAAM;AAEtC,YAAKD,QAAL,CAAc;AACZlE,QAAAA,WAAW,EAAE;AADD,OAAd;AAGD,KAjCkB;;AAAA,UAoCnBoE,MApCmB,GAoCV,UAAAT,KAAK,EAAG;AAEfU,MAAAA,YAAY,CAAC,MAAKC,KAAN,CAAZ;;AACA,YAAKJ,QAAL,CAAc;AAAEzC,QAAAA,KAAK,EAAEkC,KAAK,CAACY,MAAN,CAAa9C;AAAtB,OAAd;;AAEA,YAAK6C,KAAL,GAAaE,UAAU,CAAC,MAAKC,aAAN,EAAqB1E,aAArB,CAAvB;AACD,KA1CkB;;AAAA,UAmEnB2E,YAnEmB,GAmEJ,UAAAC,IAAI;AAAA,aAAI,UAAChB,KAAD,SAAyB;AAAA,YAAfiB,QAAe,SAAfA,QAAe;;AAC9C;AAEA,cAAKV,QAAL,qBACGS,IADH,EACUC,QADV;AAID,OAPkB;AAAA,KAnEA;;AAEjB,UAAKC,KAAL,GAAa;AACXpD,MAAAA,KAAK,EAAE,EADI;AAEXqD,MAAAA,MAAM,EAAE,EAFG;AAGX9E,MAAAA,WAAW,EAAE,EAHF;AAIX+E,MAAAA,QAAQ,EAAE;AAJC,KAAb;AAMA,UAAKN,aAAL,GAAqB,MAAKA,aAAL,CAAmBO,IAAnB,uDAArB;AARiB;AASlB;;;;yCACoB;AACnB,WAAKV,KAAL,GAAa,IAAb;AACD;;;oCAgCe;AAAA;;AAAA,UAEN7C,KAFM,GAEI,KAAKoD,KAFT,CAENpD,KAFM;AAId,UAAMwD,GAAG,GAAG,IAAIC,GAAJ,CAAQ,iEAAiEzD,KAAK,CAAC0D,OAAN,CAAc,KAAd,EAAqB,EAArB,CAAzE,CAAZ,CAJc,CAKd;;AAEAC,MAAAA,KAAK,CAACH,GAAD,EAAM;AACTlB,QAAAA,MAAM,EAAE,KADC;AAETsB,QAAAA,OAAO,EAAE;AACP,4BAAkBC,MAAM,CAACC,cAAP,CAAsBC,KADjC;AAEP,oBAAU,mCAFH;AAGP,0BAAgB;AAHT;AAFA,OAAN,CAAL,CAQGC,IARH,CAQQ,UAAAC,QAAQ;AAAA,eAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,OARhB,EASGF,IATH,CASQ,UAAAG,IAAI,EAAI;AACZ,QAAA,MAAI,CAAC1B,QAAL,CAAc;AAAElE,UAAAA,WAAW,EAAE4F,IAAI,CAACC,KAAL,CAAW,CAAX;AAAf,SAAd;AACD,OAXH,EAYGC,KAZH,CAYS,UAAUC,GAAV,EAAe;AAAEC,QAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AAAqB,OAZ/C;AAcD;;;6BAWQ;AAAA,UACC5F,OADD,GACa,KAAKsD,KADlB,CACCtD,OADD;AAAA,UAECsB,KAFD,GAEW,KAAKoD,KAFhB,CAECpD,KAFD;AAGP,UAAMyE,gBAAgB,GAAG;AACvBjG,QAAAA,oBAAoB,EAApBA,oBADuB;AAEvBD,QAAAA,WAAW,EAAE,KAAK6E,KAAL,CAAW7E,WAFD;AAGvBmG,QAAAA,2BAA2B,EAAE,KAAKlC,+BAHX;AAIvBmC,QAAAA,2BAA2B,EAAE,KAAKjC,+BAJX;AAMvBkC,QAAAA,oBAAoB,EAAE,KAAK3C,wBANJ;AAOvBvB,QAAAA,kBAAkB,EAAlBA,kBAPuB;AAQvB1B,QAAAA,gBAAgB,EAAhBA;AARuB,OAAzB;AAWA,aACE;AAAK,QAAA,SAAS,EAAEN,OAAO,CAACmC,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD,oBACM4D,gBADN;AAEE,QAAA,UAAU,EAAE;AACV/F,UAAAA,OAAO,EAAPA,OADU;AAEVmG,UAAAA,WAAW,EAAE,qBAFH;AAGV7E,UAAAA,KAAK,EAAEA,KAHG;AAIV8E,UAAAA,OAAO,EAAE,KAAKnC,MAJJ;AAKVoC,UAAAA,QAAQ,EAAE,KAAK9B,YAAL,CAAkB,OAAlB;AALA,SAFd;AASE,QAAA,KAAK,EAAE;AACLlC,UAAAA,SAAS,EAAErC,OAAO,CAACqC,SADd;AAELK,UAAAA,wBAAwB,EAAE1C,OAAO,CAAC0C,wBAF7B;AAGLK,UAAAA,eAAe,EAAE/C,OAAO,CAAC+C,eAHpB;AAILxC,UAAAA,UAAU,EAAEP,OAAO,CAACO;AAJf,SATT;AAeE,QAAA,0BAA0B,EAAE,oCAAA+F,OAAO;AAAA,iBACjC,oBAAC,KAAD,oBAAWA,OAAO,CAACC,cAAnB;AAAmC,YAAA,MAAM,MAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cACGD,OAAO,CAACE,QADX,CADiC;AAAA,SAfrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,CADF;AA2BD;;;;EAvH4BtH,KAAK,CAACuH,S;;AA0HrCpD,gBAAgB,CAACqD,SAAjB,GAA6B;AAC3B1G,EAAAA,OAAO,EAAEb,SAAS,CAACwH,MAAV,CAAiBC;AADC,CAA7B;AAIA,eAAejH,UAAU,CAACsC,MAAD,CAAV,CAAmBoB,gBAAnB,CAAf","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport deburr from 'lodash/deburr';\r\nimport Autosuggest from 'react-autosuggest';\r\nimport match from 'autosuggest-highlight/match';\r\nimport parse from 'autosuggest-highlight/parse';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nconst WAIT_INTERVAL = 2000;\r\n\r\nconst suggestions = [];\r\n\r\nfunction renderInputComponent(inputProps) {\r\n  const { classes, inputRef = () => { }, ref, ...other } = inputProps;\r\n\r\n\r\n  return (\r\n    <TextField\r\n      fullWidth\r\n      InputProps={{\r\n        inputRef: node => {\r\n          ref(node);\r\n          inputRef(node);\r\n        },\r\n        classes: {\r\n          input: classes.input,\r\n        },\r\n      }}\r\n      {...other}\r\n    />\r\n  );\r\n}\r\n\r\nfunction renderSuggestion(suggestion, { query, isHighlighted }) {\r\n  const matches = match(suggestion.prefixo + ' - ' + suggestion.nome, query);\r\n  const parts = parse(suggestion.prefixo + ' - ' + suggestion.nome, matches);\r\n\r\n  return (\r\n    <MenuItem selected={isHighlighted} component=\"div\">\r\n      <div>\r\n        {parts.map((part, index) => {\r\n          return part.highlight ? (\r\n\r\n            <span key={String(index)} style={{ fontWeight: 400 }}>\r\n              {part.text}\r\n\r\n            </span>\r\n\r\n\r\n          ) : (\r\n              <strong key={String(index)} style={{ fontWeight: 300 }}>\r\n                {part.text}\r\n              </strong>\r\n            );\r\n        })}\r\n      </div>\r\n    </MenuItem>\r\n  );\r\n}\r\n\r\nfunction getSuggestions(value) {\r\n\r\n\r\n  const inputValue = deburr(value.trim()).toLowerCase();\r\n  const inputLength = inputValue.length;\r\n  let count = 0;\r\n\r\n  return inputLength === 0\r\n    ? []\r\n    : suggestions.filter(suggestion => {\r\n      const keep =\r\n        count < 5 && suggestion.nome.slice(0, inputLength).toLowerCase() === inputValue;\r\n\r\n      if (keep) {\r\n        count += 1;\r\n      }\r\n\r\n      return keep;\r\n    });\r\n}\r\n\r\n\r\nfunction getSuggestionValue(suggestion) {\r\n\r\n  return \"\";\r\n}\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n\r\n    flexGrow: 1,\r\n  },\r\n  container: {\r\n    position: 'relative',\r\n    marginTop: theme.spacing.unit*2,\r\n  },\r\n  suggestionsContainerOpen: {\r\n    position: 'absolute',\r\n    zIndex: 1,\r\n    marginTop: theme.spacing.unit,\r\n    left: 0,\r\n    right: 0,\r\n  },\r\n  suggestion: {\r\n    display: 'block',\r\n  },\r\n  suggestionsList: {\r\n    margin: 0,\r\n    padding: 0,\r\n    listStyleType: 'none',\r\n  },\r\n  divider: {\r\n    height: theme.spacing.unit * 2,\r\n  },\r\n});\r\n\r\nclass BuscaDependencia extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      value: '',\r\n      popper: '',\r\n      suggestions: [],\r\n      selected: []\r\n    };\r\n    this.triggerChange = this.triggerChange.bind(this);\r\n  }\r\n  componentWillMount() {\r\n    this.timer = null;\r\n  }\r\n\r\n\r\n\r\n\r\n  handleSuggestionSelected = (event, { suggestion, suggestionValue, suggestionIndex, sectionIndex, method }) => {\r\n\r\n    this.props.addSuggestion(suggestion)\r\n\r\n  }\r\n  handleSuggestionsFetchRequested = ({ value }) => {\r\n    this.setState({\r\n      suggestions: getSuggestions(value),\r\n    });\r\n  };\r\n\r\n  handleSuggestionsClearRequested = () => {\r\n\r\n    this.setState({\r\n      suggestions: [],\r\n    });\r\n  };\r\n\r\n\r\n  search = event =>{\r\n    \r\n    clearTimeout(this.timer);\r\n    this.setState({ value: event.target.value });\r\n\r\n    this.timer = setTimeout(this.triggerChange, WAIT_INTERVAL);\r\n  }\r\n\r\n  triggerChange() {\r\n\r\n    const { value } = this.state;\r\n\r\n    const url = new URL(\"https://uce.intranet.bb.com.br/api-timeline/v1/dependencias/\" + value.replace(/\\s/g, ''))\r\n    //Object.keys(params).forEach(key => url.searchParams.append(key, params[key]))\r\n\r\n    fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"x-access-token\": window.sessionStorage.token,\r\n        'Accept': 'application/json, text/plain, */*',\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        this.setState({ suggestions: data.users[0] })\r\n      })\r\n      .catch(function (err) { console.error(err); });\r\n\r\n  }\r\n\r\n  handleChange = name => (event, { newValue }) => {\r\n    //this.props.addFuncionario(newValue)\r\n\r\n    this.setState({\r\n      [name]: newValue,\r\n    });\r\n\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { value } = this.state;\r\n    const autosuggestProps = {\r\n      renderInputComponent,\r\n      suggestions: this.state.suggestions,\r\n      onSuggestionsFetchRequested: this.handleSuggestionsFetchRequested,\r\n      onSuggestionsClearRequested: this.handleSuggestionsClearRequested,\r\n\r\n      onSuggestionSelected: this.handleSuggestionSelected,\r\n      getSuggestionValue,\r\n      renderSuggestion,\r\n    };\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <Autosuggest\r\n          {...autosuggestProps}\r\n          inputProps={{\r\n            classes,\r\n            placeholder: 'Buscar dependências',\r\n            value: value,\r\n            onKeyUp: this.search,\r\n            onChange: this.handleChange('value')\r\n          }}\r\n          theme={{\r\n            container: classes.container,\r\n            suggestionsContainerOpen: classes.suggestionsContainerOpen,\r\n            suggestionsList: classes.suggestionsList,\r\n            suggestion: classes.suggestion,\r\n          }}\r\n          renderSuggestionsContainer={options => (\r\n            <Paper {...options.containerProps} square>\r\n              {options.children}\r\n            </Paper>\r\n          )}\r\n        />\r\n\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nBuscaDependencia.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(BuscaDependencia);\r\n"]},"metadata":{},"sourceType":"module"}